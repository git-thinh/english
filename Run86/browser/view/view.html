<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <style type="text/css">
        a {
            text-decoration: none;
        }

        .___box_img {
            display: none;
        }

        body {
            padding: 20px 10px;
            margin: 0px;
        }

        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            -webkit-box-shadow: none;
            border-radius: 0px;
            background-color: #fafafa;
        }

        ::-webkit-scrollbar-thumb {
            border-radius: 0px;
            -webkit-box-shadow: none;
            background-color: #ccc;
        }
    </style>
    <script type="text/javascript">

        function f_domLoaded() {
            var URL = location.href,
                aHost = location.hostname.split('.'),
                DOMAIN_MAIN = aHost.length > 1 ? (aHost[aHost.length - 2] + '.' + aHost[aHost.length - 1]) : aHost[0];
            aHost = URL.split('/');
            var URL_SCHEME = aHost[0].substring(0,aHost[0].length - 1),
                HTTP_ROOT = URL_SCHEME + '://' + aHost[2] + '/',
                URL_DIR = URL;
            if (URL[URL.length - 1] != '/')
                URL_DIR = URL.substring(0, URL.length - URL[RUL.length - 1].length);

            console.info("----> DOM loaded: URL = " + URL);
            console.info("----> DOM loaded: URL_SCHEME = " + URL_SCHEME);
            console.info("----> DOM loaded: DOMAIN_MAIN = " + DOMAIN_MAIN);
            console.info("----> DOM loaded: URL_DIR = " + URL_DIR);
            console.info("----> DOM loaded: HTTP_ROOT = " + HTTP_ROOT);

            var els = document.querySelectorAll('*');
            for (var i = 0; i < els.length; i++) {
                var el = els[i], s = el.innerText;
                if (s == null || s == undefined || s.length == 0) {
                    //console.log('type = ' + el.type + '; name = ' + el.name + '; text = ' + s);
                    el.style.display = 'none';
                }
            }

            var links = document.querySelectorAll('a'),
                aLink = [];
            for (var i = 0; i < links.length; i++) {
                var el = links[i], text = el.innerText;
                if (text != null && text.length > 0 && el.hasAttribute('href') == true) {
                    text = text.trim();
                    if (text.length == 0 || text[0] == '#') continue;
                    var link = el.getAttribute('href').trim();
                    if (link.length == 0 || link[0] == '#') continue;

                    if (link.indexOf(DOMAIN_MAIN) != -1 || link.indexOf('http') != 0) {
                        var link_full = '';
                        if (link.indexOf('//') == 0)
                            link_full = URL_SCHEME + ':' + link;
                        else {
                            if (link.indexOf('http') != 0) {
                                if (link[0] == '/') link_full = HTTP_ROOT + link.substr(1);
                                else if (link.indexOf('../') == 0) { }
                                else {
                                    link_full = URL_DIR + link;
                                }                                
                            }
                        }

                        if (link_full.length > 0) {
                            //console.log('A = ' + link + ' -> ' + link_full);
                            link = link_full;
                        }

                        if (URL == link || URL == link + '/' || link.indexOf('javascript:') != -1) continue;
                        aLink.push({ Text: text, Url: link });
                    }
                }
            }
            if (aLink.length > 0) {
                var json = JSON.stringify(aLink);
                API.UpdateLinks(json);
            }

            var imgs = document.querySelectorAll('.___img_src');
            for (var i = 0; i < imgs.length; i++) {
                var el = imgs[i], s = el.value;
                if (s != null && s.length > 0) {
                    //console.log('IMG = ' + s);
                }
            }
        }

        if (document.readyState === "loading") {
            document.addEventListener("DOMContentLoaded", f_domLoaded);
        } else {
            f_domLoaded();
        }
    </script>
</head>
<body>
    <button onclick="location.reload()" style="position:fixed;z-index:999999;bottom:0px;right:0px;">Reload</button>
